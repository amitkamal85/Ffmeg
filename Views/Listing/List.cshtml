@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model IEnumerable<NotFinal.Models.VideoConfig>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">

<style>
        .top-nav ul {
            padding: 0;
            list-style: none;
            display: flex;
            justify-content: flex-end;
            margin: 0 0 5px 0;
        }

            .top-nav ul li a {
                font-size: 16px;
                font-weight: 500;
                color: gray !important;
                margin: 0 0 0 30px;
                text-decoration: none;
            }

        .fullpage-div {
            border: 1px solid #dddddd;
            border-radius: 6px;
        }

        .create_ul li p {
            font-size: 16px;
            font-weight: bold;
            color: #fff;
            margin: 0;
        }

        .create_ul {
            background: #33393d;
            padding: 10px 15px !important;
            margin: 0;
            list-style: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .create-bt {
            font-weight: 600;
            background: #0067ef;
            border: none;
            color: #fff;
            border-radius: 6px;
            font-size: 14px;
            height: 40px;
            padding: 0 15px;
            line-height: 40px;
        }

        .dummy-img {
            max-width: 120px;
        }

        .table-custom table thead tr th {
            font-size: 14px;
            font-weight: bold;
            padding: 15px 30px;
            border-bottom: 1px solid #dddddd;
        }

        .table-custom table {
            width: 100%;
        }

            .table-custom table tbody tr td {
                font-size: 14px;
                font-weight: normal;
                padding: 15px 30px;
                border-bottom: 1px solid #dddddd;
                vertical-align: top;
            }

        .i-tg ul {
            margin: 0;
            padding: 0;
            list-style: none;
            display: flex;
            justify-content: flex-end;
        }

        .pera__1 {
            font-size: 20px;
            font-weight: bold;
            margin: 0 0 5px 0;
        }

        .pera__2 {
            font-size: 14px;
            margin: auto;
        }

        .top-nav ul li a.active {
            color: #0067ef !important;
        }

        .i-tg li i {
            height: 30px;
            width: 30px;
            text-align: center;
            line-height: 30px;
            margin: 0 0 0 10px;
            border-radius: 5px;
            color: #fff;
            font-size: 14px;
            cursor: pointer;
        }

        .i-tg ul i.fa-solid.fa-info {
            background: #0067ef;
        }

        .i-tg li i.fa-solid.fa-pen-to-square {
            background: #0796b7;
        }

        .i-tg li i.fa-solid.fa-trash-can {
            background: #d13937;
        }

        .table-custom table tbody tr:last-child td {
            border: none;
        }

    /*            media(max-width: 991px) {
                    .table-custom {
                        overflow: auto;
                    }

                    .table-custom table {
                        min-width: 670px;
                    }
                }*/
</style>

<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="top-nav">
                    <ul>
                        <li><a class="active" href="">Home</a></li>
                        <li><a href="">Video Management</a></li>
                        <li><a href="">Creat Video</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-12">
                <div class="fullpage-div">
                    <ul class="create_ul">
                        <li>
                            <p>List of Video</p>
                        </li>
                        <li><button class="create-bt" onclick="location.href='@Url.Action("AddOriginal", "Upload")'"><i class="fa-solid fa-plus"></i> Create</button></li>
                    </ul>
                    <div class="table-custom">
                        <table>
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>@Html.DisplayNameFor(model => model.Title)</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model)
                                {
                                    <tr>
                                        <td><video id="videoplayer" src="@item.OriginalVideo" width="300" height="200" controls loop></td>
                                        <td>
                                            <p class="pera__1"><label>@item.Title</label></p>
                                            <p class="pera__2">Created By : <b>@item.CreatedBy</b></p>
                                            <p class="pera__2">Date : <b>@item.CreatedDate</b></p>
                                            <p class="pera__2">Duration : <b>@item.Duration</b></p>
                                            @*<p class="pera__2">Processed In : <b>hello</b></p>*@
                                        </td>
                                        <td>
                                            <div class="i-tg">
                                                <ul>
                                                    <li onclick="location.href='@Url.Action("Display", "Listing",new{id=@item.Id})'"> <i class="fa-solid fa-info" ></i></li>
                                                    @*<li><i class="fa-solid fa-pen-to-square"></i></li>*@
                                                    <li onclick="DeleteData(@item.Id);"><i class="fa-solid fa-trash-can"></i></li>
                                                    <input type="hidden" id="VideoId" value="@item.Id" />
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

@*<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Title)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.OriginalVideo)
        </th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                <label>@item.Title</label>
            </td>
            <td>
                <video id="videoplayer" src="@item.OriginalVideo" width="300" height="200" controls loop></video>
            </td>
        </tr>
    }
</table>*@

<script type="text/javascript">

    function DeleteData(Id) {
        debugger;
        if (Id != "") {

            var isconfirmed = confirm("Are you sure to delete this user?");
            debugger;
            if (isconfirmed) {
                debugger;
                $.ajax({
                    type: "POST",
                    @*contentType: "application/json; charset=utf-8",*@
                    url: "@Url.Action("DeleteVideoData", "Listing")",
                    data: { Id : Id },
                    dataType: "json",
                    success: function(data) {
                        debugger;
                        if (data == 1) {
                            alert("Record deleted successfully.");
                            window.location.reload();
                        }
                        else {
                            alert("Error in deleting records.");
                        }

                    },
                    error: function(xhr) {
                    }
                });
            }
        }
    }


</script>